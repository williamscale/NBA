axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
View(court.plotter.lines)
# Import function.
source('../Functions/drawNBAcourt.R')
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
View(fg.halfcourt)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 1)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 1)),
eff = mean(SHOT_MADE_FLAG == 1)) %>%
group_by(xbin, ybin) %>%
mutate(bin.avg = mean(SHOT_MADE_FLAG == 1)) %>%
ungroup() %>%
mutate(bin.eff = bin.avg - eff)
View(fg.halfcourt.eff)
View(fg.halfcourt.eff)
# Author: Cale Williams
# Last Updated: 01/28/2022
# ADMINISTRATIVE WORK -----------------------------------------------------
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# DATA PREPARATION --------------------------------------------------------
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 1)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 1)),
eff = mean(SHOT_MADE_FLAG == 1)) %>%
group_by(xbin, ybin) %>%
mutate(bin.avg = mean(SHOT_MADE_FLAG == 1))
View(fg.halfcourt.eff)
ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(1, 1)) +
scale_fill_gradient2(low="darkred", high = "darkgreen")
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2)),
eff = mean(SHOT_MADE_FLAG == 1)) %>%
group_by(xbin, ybin) %>%
mutate(bin.avg = mean(SHOT_MADE_FLAG == 1))
ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(1, 1)) +
scale_fill_gradient2(low="darkred", high = "darkgreen")
ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(2, 2)) +
scale_fill_gradient2(low="darkred", high = "darkgreen")
fg.eff <- ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(2, 2))
court.plotter.lines(fg.plot = fg.eff) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2)),
eff = mean(SHOT_MADE_FLAG == 1)) %>%
group_by(xbin, ybin) %>%
mutate(bin.avg = mean(SHOT_MADE_FLAG == 1))
fg.eff <- ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(2, 2))
court.plotter.lines(fg.plot = fg.eff) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
View(fg.halfcourt.eff)
fg.eff <- ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(data = fg.halfcourt.eff, aes(group = bin.avg), binwidth = c(2, 2))
court.plotter.lines(fg.plot = fg.eff) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(2, 2)) +
scale_fill_gradient2(low="darkred", high = "darkgreen")
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2)),
eff = mean(SHOT_MADE_FLAG == 1)) %>%
group_by(xbin, ybin) %>%
mutate(bin.avg = mean(SHOT_MADE_FLAG == 1))
fg.eff <- ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg)) +
geom_bin2d(aes(group = bin.avg), binwidth = c(2, 2))
View(fg.eff)
court.plotter.lines(fg.plot = fg.eff) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
fg.eff <- ggplot(fg.halfcourt.eff,
aes(LOC_X, LOC_Y, fill = bin.avg, group = bin.avg))
court.plotter.lines(fg.plot = fg.eff) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
# Author: Cale Williams
# Last Updated: 01/28/2022
# ADMINISTRATIVE WORK -----------------------------------------------------
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# DATA PREPARATION --------------------------------------------------------
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2)))
View(fg.halfcourt.eff)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin)
View(fg.halfcourt.eff)
# Author: Cale Williams
# Last Updated: 01/28/2022
# ADMINISTRATIVE WORK -----------------------------------------------------
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# DATA PREPARATION --------------------------------------------------------
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin)
View(fg.halfcourt.eff)
?group_by
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin) %>%
summarize(sum.made = sum(SHOT_MADE_FLAG))
fg.halfcourt.eff <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin)
fg.eff <- aggregate(SHOT_MADE_FLAG ~ xbin + ybin,
data = fg.halfcourt.eff,
FUN = sum)
View(fg.eff)
# Author: Cale Williams
# Last Updated: 01/28/2022
# ADMINISTRATIVE WORK -----------------------------------------------------
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# DATA PREPARATION --------------------------------------------------------
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.bin <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin)
fg.bin.m <- aggregate(SHOT_MADE_FLAG ~ xbin + ybin,
data = fg.halfcourt.bin,
FUN = sum)
fg.bin.a <- aggregate(SHOT_ATTEMPT_FLAG ~ xbin + ybin,
data = fg.halfcourt.bin,
FUN = sum)
fg.bin.a <- aggregate(SHOT_ATTEMPTED_FLAG ~ xbin + ybin,
data = fg.halfcourt.bin,
FUN = sum)
View(fg.bin.a)
View(fg.bin.m)
fg.eff <- cbind(fg.bin.m, fg.bin.a)
View(fg.eff)
fg.eff <- merge(fg.bin.m, fg.bin.a, by = c('xbin', 'ybin'))
View(fg.eff)
fg.eff$bin.eff <- fg.eff$SHOT_MADE_FLAG / fg.eff$SHOT_ATTEMPTED_FLAG
ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff)) +
geom_bin2d(binwidth = c(2, 2))
x <- ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff)) +
geom_bin2d(binwidth = c(2, 2))
court.plotter.lines(fg.plot = x) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
View(court.plotter.lines)
x <- ggplot(fg.eff, aes(xbin, ybin))
court.plotter.lines(fg.plot = x) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
court.plotter.lines(fg.plot = x) +
geom_bin2d(binwidth = c(2, 2))
court.plotter.lines(fg.plot = x) +
geom_bin2d(binwidth = c(2, 2)) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
x <- ggplot(fg.eff, aes(xbin, ybin))
court.plotter.lines(fg.plot = x) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
court.plotter.lines(fg.plot = x) +
geom_bin2d(aes(fill = bin.eff)) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
court.plotter.lines(fg.plot = x) +
geom_bin2d(aes(fill = bin.eff), binwidth = c(2, 2)) +
ggtitle('Keldon Johnson 2021-22') +
theme_solarized_2() +
theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_blank(),
axis.ticks.x = element_blank(),
axis.ticks.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank())
x <- ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff)) +
geom_bin2d(binwidth = c(2, 2))
x
x + court.plotter.lines()
x + court.plotter.lines(x)
court.plotter.lines(x)
y <- ggplot()
court.plotter.lines(y)
x <- ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff)) +
geom_bin2d(binwidth = c(2, 2))
court.plotter.lines(y) + x
rlang::last_error()
court.plotter.lines(y) + ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff))
court.plotter.lines(y) + ggplot(fg.eff, aes(xbin, ybin))
# Author: Cale Williams
# Last Updated: 01/28/2022
# ADMINISTRATIVE WORK -----------------------------------------------------
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
library(ggthemes)
# Import function.
source('../Functions/drawNBAcourt.R')
# DATA PREPARATION --------------------------------------------------------
# Read in data.
shots <- read.csv('./2021-22/Keldon-Johnson.2021-22.csv',
header = TRUE)
# Transform shot locations.
shots.t <- shotchart.transformer(data = shots,
col.x = 'LOC_X',
col.y = 'LOC_Y')
fg.m <- shots.t %>%
filter(SHOT_MADE_FLAG == 1)
fg.a <- shots.t %>%
filter(SHOT_MADE_FLAG == 0)
fg.halfcourt <- shots.t %>%
filter(LOC_Y <= 0)
fg.halfcourt.bin <- fg.halfcourt %>%
mutate(xbin = cut(LOC_X, breaks = seq(-25, 25, by = 2)),
ybin = cut(LOC_Y, breaks = seq(-47, 0, by = 2))) %>%
group_by(xbin, ybin)
fg.bin.m <- aggregate(SHOT_MADE_FLAG ~ xbin + ybin,
data = fg.halfcourt.bin,
FUN = sum)
fg.bin.a <- aggregate(SHOT_ATTEMPTED_FLAG ~ xbin + ybin,
data = fg.halfcourt.bin,
FUN = sum)
fg.eff <- merge(fg.bin.m, fg.bin.a, by = c('xbin', 'ybin'))
fg.eff$bin.eff <- fg.eff$SHOT_MADE_FLAG / fg.eff$SHOT_ATTEMPTED_FLAG
y <- ggplot()
court <- court.plotter.lines(y)
court
x <- ggplot(fg.eff, aes(xbin, ybin, fill = bin.eff)) +
geom_bin2d(binwidth = c(2, 2))
court + x
rlang::last_error()
rlang::last_trace()
library(patchwork)
install.packages('patchwork')
court + x
View(x)
View(court)
install.packages('ggpubr')
install.packages("ggpubr")
install.packages("ggpubr")
install.packages("ggpubr")
library(ggpubr)
# Clear workspace and set seed.
rm(list = ls())
set.seed(55)
setwd('C:/Users/caler/Documents/MyProjects/NBA/R/Shotcharts')
# Import libraries.
library(dplyr)
library(ggplot2)
